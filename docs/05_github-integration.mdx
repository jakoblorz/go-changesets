---
title: GitHub Actions Integration
description: Automate version PRs and GitHub releases.
---

# GitHub Actions Integration

go-changeset keeps CI low-tech and repo-specific. It provides stable primitives for versioning and publishing; you decide how to wire them.

## Release model (two-phase)

1. **Version PRs (staging)**
   - Read changesets and bump versions.
   - Update `version.txt` (Go) or `package.json` (Node).
   - Append to `CHANGELOG.md`.
2. **Publish (after merge)**
   - Compare version file to latest tag.
   - Create a tag and (optionally) a GitHub release.

## Reusable workflows (recommended)

This repo ships reusable workflows:

- `.github/workflows/changesets.yml` - version PRs + publish
- `.github/workflows/snapshot.yml` - RC snapshot tags

Example:

```yaml
jobs:
  changesets:
    uses: jakoblorz/go-changesets/.github/workflows/changesets.yml@vX.Y.Z
    with:
      base_branch: main
    secrets:
      version_token: ${{ secrets.CI_PAT }}
      publish_token: ${{ secrets.CI_PAT }}
```

Snapshot example:

```yaml
jobs:
  snapshot:
    uses: jakoblorz/go-changesets/.github/workflows/snapshot.yml@vX.Y.Z
    with:
      snapshot_branch: canary
      snapshot_project: ""
    secrets:
      snapshot_token: ${{ secrets.CI_PAT }}
```

Pinning the workflow (`@vX.Y.Z`) pins the go-changeset version used by default. You can override with the `changeset_ref` input.

## Composite actions (step-level)

If you want to control setup yourself, call the composite actions inside an existing job:

- `.github/actions/changeset-version`
- `.github/actions/changeset-publish`
- `.github/actions/changeset-snapshot`

These actions accept `changeset_ref`, `node_strict_workspace`, and the token inputs below.

## Tokens

- Defaults to existing `GITHUB_TOKEN`/`GH_TOKEN` in the job.
- Optional inputs:
- `version_token` - for `changeset-version`
- `publish_token` - for `changeset-publish`
- `snapshot_token` - for `changeset-snapshot`
- Use a PAT if you need PRs or releases to trigger downstream workflows.

## Notes

- Use `actions/checkout` with `fetch-depth: 0` so tags and history are available.
- Configure git identity if your job creates commits.
- The version workflow uses git worktrees for isolation.

## Full examples

- `kitchensink/.github/workflows/changeset.yml`
- `kitchensink/.github/workflows/snapshot.yml`
