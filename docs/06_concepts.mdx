---
title: Concepts and Project Model
description: How go-changeset discovers projects, stores versions, and formats tags.
---

# Concepts and Project Model

This page describes the key concepts used by `go-changeset` so you can reason about what the CLI does and how to integrate it into your repo.

## Workspace detection

`go-changeset` looks for a **workspace root** by walking up from the current working directory and stopping at the first directory that contains a `go.work` or a `package.json`:

- If it finds a `go.work`, it treats the repo as a Go workspace and discovers Go projects from `use` entries.
- If it finds a `package.json`, it can also discover Node projects via npm/yarn workspaces.
- If both files exist in the same root, it loads both Go and Node projects.
- It does not crawl the full tree or consult `.gitignore`; discovery comes only from `go.work` `use` entries and the `package.json` workspaces list.

## Projects

A **project** is the unit of versioning and releasing.

- **Go projects** are discovered by locating `go.mod` files referenced by `go.work`.
- **Node projects** are discovered via `package.json` workspaces.

Each project has:

- `name`: derived from the module/package name (deduped if needed)
- `root`: the project root directory

## Changesets

A **changeset** is a Markdown file in `.changeset/` with YAML frontmatter.

Example:

```md
---
auth: minor
---

Add OAuth2 support
```

### Human-friendly filenames

Changesets are stored as `.changeset/{id}.md`, where `{id}` is generated to be easy to refer to in conversations:

- `{adjective}_{animal}_{nanoid}`
- Example: `dazzling_mouse_V1StGXR8.md`

## Version storage

- **Go projects** store their version in `version.txt` at the project root.
- **Node projects** store their version in the `version` field of `package.json`.

### Disabling Go projects

To hide a Go project from `go-changeset`, set its `version.txt` to `false`:

```bash
echo "false" > path/to/project/version.txt
```

### Disabling Node projects

To hide a Node project from `go-changeset`, mark it as private in its `package.json`:

```json
{
  "name": "internal-tools",
  "private": true
}
```

## Git tags

Published versions are represented by git tags:

- Go tags:
  - Final releases: `{project}@v{version}` (example: `auth@v1.2.3`)
  - Snapshots/RCs: `{project}@v{version}-rc{N}` (example: `auth@v1.3.0-rc1`)
- Node tags:
  - Final releases: `{project}@{version}` (example: `web@1.2.3`)
  - Snapshots/RCs: `{project}@{version}-rc{N}` (example: `web@1.3.0-rc1`)

## Changelogs

`go-changeset` generates/updates `CHANGELOG.md` files per project.

- The `changelog` command prints the entry that would be added (preview)
- The `version` command appends a new entry and consumes changesets

You can customize formatting by placing a `.changeset/changelog.tmpl` template in your repo or project tree.
